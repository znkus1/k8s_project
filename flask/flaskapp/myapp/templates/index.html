<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="script.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <title>항공권 비교 및 예약 | 스카이스캐너</title>
</head>
    <body>
        <header>
            <div class="logo">
                <img src="data:image/png;base64,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" alt="Skyscanner Logo">
            </div>
        </header>
        <main>
            <section class="search-results">
                <!-- 여기에 검색 결과를 표시할 수 있습니다. -->
            </section>
        </main>
       <div class="main-content">

        <div class="center-image">
            <img src="{{ url_for('static', filename='center.png') }}" alt="Center Image">
        </div>
        <div class="container">
            <h1><i class="fas fa-plane-departure"></i> 지연 확률 예측 서비스</h1>
            <form id="flight-form">
                <input type="number" id="month" placeholder="월" required>
                <input type="number" id="dayOfMonth" placeholder="일" required>
                <input type="number" id="dayOfWeek" placeholder="요일" required>
                <input type="number" id="crsDepTime" placeholder="출발시간" required>
                <input type="number" id="crsArrTime" placeholder="도착시간" required>
                <input type="number" id="flightNum" placeholder="항공기 번호" required>
                <input type="number" id="distance" placeholder="거리 (km)" required>
                <input type="number" id="originIndex" placeholder="출발지 공항 번호" required>
                <input type="number" id="destIndex" placeholder="도착지 공항 번호" required>
                <input type="number" id="carrierIndex" placeholder="항공사 번호" required>
                <button type="button" id="search-btn">티켓 조회</button>
            </form>
            <div id="ticket-info"></div>
            <button type="button" id="predict-btn" style="display: none;">예측하기</button>
            <div id="prediction-info" style="display: none;"></div>

            <h2>지연율 순위</h2>
            <ol id="airline-ranking">
                <li>대한항공</li>
                <li>아시아나항공</li>
                <li>제주항공</li>
                <li>진에어</li>
                <li>티웨이항공</li>
            </ol>
        </div>
        </div>

        <script>
        document.getElementById("search-btn").addEventListener("click", function() {
            const month = document.getElementById("month").value;
            const dayOfMonth = document.getElementById("dayOfMonth").value;
            const dayOfWeek = document.getElementById("dayOfWeek").value;
            const crsDepTime = document.getElementById("crsDepTime").value;
            const crsArrTime = document.getElementById("crsArrTime").value;
            const flightNum = document.getElementById("flightNum").value;
            const distance = document.getElementById("distance").value;
            const originIndex = document.getElementById("originIndex").value;
            const destIndex = document.getElementById("destIndex").value;
            const carrierIndex = document.getElementById("carrierIndex").value;
            
            const user_input = JSON.stringify({
                "month": month,
                "dayOfMonth": dayOfMonth,
                "dayOfWeek": dayOfWeek,
                "crsDepTime": crsDepTime,
                "crsArrTime": crsArrTime,
                "flightNum": flightNum,
                "distance": distance,
                "originIndex":originIndex, 
                "destIndex":destIndex,
                "carrierIndex":carrierIndex

            });
            
            const ticketInfo = `${month}월 ${dayOfMonth}일 요일<br>출발시간 ${Math.floor(crsDepTime / 100)}시 ${crsDepTime % 100}분 <br>도착시간 ${Math.floor(crsArrTime / 100)}시 ${crsArrTime % 100}분 <br> 항공기번호: ${flightNum} <br> 거리: ${distance}km<br>${originIndex}호 ${destIndex}호 ${carrierIndex}호`;
            
            // Display the ticket information
            document.getElementById("ticket-info").innerHTML = ticketInfo;
            document.getElementById("ticket-info").style.display = "block";
            
            // Display the predict button
            document.getElementById("predict-btn").style.display = "block";
            
            // '예측하기' 버튼 클릭 이벤트 핸들러 내에서 'user_input' 변수를 정의합니다.
            document.getElementById("predict-btn").addEventListener("click", function() {
                // 사용자 입력을 JSON 형식으로 준비한 변수 (user_input)을 이곳에서 사용
            
                // 서버로 POST 요청 보내기
                fetch('/re', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: user_input, // 수정: 'user_input' 변수를 사용
                })
                .then(response => response.json())
                .then(data => {
                    const predictionResult = data.result;
                    // 결과를 웹 페이지에 표시
                    document.getElementById("prediction-info").innerHTML = predictionResult;
                    document.getElementById("prediction-info").style.display = "block";
                })
                .catch(error => {
                    console.error('예측 요청 중 오류 발생: ', error);
                });
            });
            });
        </script>        
    </body>